<%= javascript_include_tag "age.js" %>
<div class="body">
  <div class="div_center">
    <div class="div_bold">■性別・年齢別人口増減入力画面■</div><br/>
    <%= link_to "戻る", @target_event, :class=>'no_border_link' %><br/>
    <div><span class="div_bold">この年の人口増減を入力してください</span><br/>
    ※人口増減は棒グラフで表示されます。細かい値は気にせず入力してください
    <br/>
    <div class="font_20"><%= @target_event.title %></div>
    <%= render "shared/errors_flash" %>
    <%= form_for @age_and_genders do |form| %>
      <div>
        人口増減割合:
        <select id="calculate_rate">
          <option value=""></option>
          <option value=0.05>5%</option>
          <option value=0.10>10%</option>
          <option value=0.15>15%</option>
          <option value=0.20>20%</option>
          <option value=0.25>25%</option>
          <option value=0.30>30%</option>
          <option value=0.35>35%</option>
          <option value=0.40>40%</option>
          <option value=0.45>45%</option>
          <option value=0.50>50%</option>
          <option value=0.55>55%</option>
          <option value=0.60>60%</option>
          <option value=0.65>65%</option>
          <option value=0.70>70%</option>
          <option value=0.75>75%</option>
          <option value=0.80>80%</option>
          <option value=0.85>85%</option>
          <option value=0.90>90%</option>
          <option value=0.95>95%</option>
          <option value=1.00>100%</option>
        </select>
        <input type="button" value="減少" onclick="calculate(true)"/>
        <input type="button" value="増加" onclick="calculate(false)"/>
      </div>

      <table id="age_new_table" class="table_main inline-block head_color">
        <thead>
          <tr>
            <th class="td_w150">女性</th>
            <th class="td_w200">出生年|年齢</th>
            <th class="td_w150">男性</th>
          </tr>
        <tbody class="table_body">
          <tr>
            <td class="">
              <%= form.text_field :F1910, size: 10, :class=>'age_new_input',:id=>"input_F1910" %>
              <input type="checkbox" name="checkbox" class="cal_checkbox" value="F1910">
            </td>
            <td class="">~1910|<%= controller.get_age(@event_year, nil, 1919) %>歳～</td>
            <td class="">
              <%= form.text_field :M1910, size: 10, :class=>'age_new_input',:id=>"input_M1910" %>
              <input type="checkbox" name="checkbox" class="cal_checkbox" value="M1910">
            </td>
          </tr>
          <tr>
            <td class="">
              <%= form.text_field :F1920, size: 10, :class=>'age_new_input',:id=>"input_F1920"  %>
              <input type="checkbox" name="checkbox" class="cal_checkbox" value="F1920">
            </td>
            <td class="">1920~1929|<%= controller.get_age(@event_year, 1920, 1929) %>歳</td>
            <td class="">
              <%= form.text_field :M1920, size: 10, :class=>'age_new_input',:id=>"input_M1920"  %>
              <input type="checkbox" name="checkbox" class="cal_checkbox" value="M1920">
            </td>
          </tr>
          <tr>
            <td class="">
              <%= form.text_field :F1930, size: 10, :class=>'age_new_input',:id=>"input_F1930"  %>
              <input type="checkbox" name="checkbox" class="cal_checkbox" value="F1930">
            </td>
            <td class="">1930~1939|<%= controller.get_age(@event_year, 1930, 1939) %>歳</td>
            <td class="">
              <%= form.text_field :M1930, size: 10, :class=>'age_new_input',:id=>"input_M1930"  %>
              <input type="checkbox" name="checkbox" class="cal_checkbox" value="M1930">
            </td>
          </tr>
          <tr>
            <td class="">
              <%= form.text_field :F1940, size: 10, :class=>'age_new_input',:id=>"input_F1940"  %>
              <input type="checkbox" name="checkbox" class="cal_checkbox" value="F1940">
            </td>
            <td class="">1940~1949|<%= controller.get_age(@event_year, 1940, 1949) %>歳</td>
            <td class="">
              <%= form.text_field :M1940, size: 10, :class=>'age_new_input',:id=>"input_M1940"  %>
              <input type="checkbox" name="checkbox" class="cal_checkbox" value="M1940">
            </td>
          </tr>
          <tr>
            <td class="">
              <%= form.text_field :F1950, size: 10, :class=>'age_new_input',:id=>"input_F1950"  %>
              <input type="checkbox" name="checkbox" class="cal_checkbox" value="F1950">
            </td>
            <td class="">1950~1959|<%= controller.get_age(@event_year, 1950, 1959) %>歳</td>
            <td class="">
              <%= form.text_field :M1950, size: 10, :class=>'age_new_input',:id=>"input_M1950"  %>
              <input type="checkbox" name="checkbox" class="cal_checkbox" value="M1950">
            </td>
          </tr>
          <tr>
            <td class="">
              <%= form.text_field :F1960, size: 10, :class=>'age_new_input',:id=>"input_F1960"  %>
              <input type="checkbox" name="checkbox" class="cal_checkbox" value="F1960">
            </td>
            <td class="">1960~1969|<%= controller.get_age(@event_year, 1960, 1969) %>歳</td>
            <td class="">
              <%= form.text_field :M1960, size: 10, :class=>'age_new_input',:id=>"input_M1960"  %>
              <input type="checkbox" name="checkbox" class="cal_checkbox" value="M1960">
            </td>
          </tr>
          <tr>
            <td class="">
              <%= form.text_field :F1970, size: 10, :class=>'age_new_input',:id=>"input_F1970"  %>
              <input type="checkbox" name="checkbox" class="cal_checkbox" value="F1970">
            </td>
            <td class="">1970~1979|<%= controller.get_age(@event_year, 1970, 1979) %>歳</td>
            <td class="">
              <%= form.text_field :M1970, size: 10, :class=>'age_new_input',:id=>"input_M1970"  %>
              <input type="checkbox" name="checkbox" class="cal_checkbox" value="M1970">
            </td>
          </tr>
          <tr>
            <td class="">
              <%= form.text_field :F1980, size: 10, :class=>'age_new_input',:id=>"input_F1980"  %>
              <input type="checkbox" name="checkbox" class="cal_checkbox" value="F1980">
            </td>
            <td class="">1980~1989|<%= controller.get_age(@event_year, 1980, 1989) %>歳</td>
            <td class="">
              <%= form.text_field :M1980, size: 10, :class=>'age_new_input',:id=>"input_M1980"  %>
              <input type="checkbox" name="checkbox" class="cal_checkbox" value="M1980">
            </td>
          </tr>
          <tr>
            <td class="">
              <%= form.text_field :F1990, size: 10, :class=>'age_new_input',:id=>"input_F1990"  %>
              <input type="checkbox" name="checkbox" class="cal_checkbox" value="F1990">
            </td>
            <td class="">1990~1999|<%= controller.get_age(@event_year, 1990, 1999) %>歳</td>
            <td class="">
              <%= form.text_field :M1990, size: 10, :class=>'age_new_input',:id=>"input_M1990"  %>
              <input type="checkbox" name="checkbox" class="cal_checkbox" value="M1990">
            </td>
          </tr>
          <tr>
            <td class="">
              <%= form.text_field :F2000, size: 10, :class=>'age_new_input',:id=>"input_F2000"  %>
              <input type="checkbox" name="checkbox" class="cal_checkbox" value="F2000">
            </td>
            <td class="">2000~2009|<%= controller.get_age(@event_year, 2000, 2009) %>歳</td>
            <td class="">
              <%= form.text_field :M2000, size: 10, :class=>'age_new_input',:id=>"input_M2000"  %>
              <input type="checkbox" name="checkbox" class="cal_checkbox" value="M2000">
            </td>
          </tr>
          <tr>
            <td class="">
              <%= form.text_field :F2010, size: 10, :class=>'age_new_input',:id=>"input_F2010"  %>
              <input type="checkbox" name="checkbox" class="cal_checkbox" value="F2010">
            </td>
            <td class="">2010~|0～<%= controller.get_age(@event_year, 2010, nil) %>歳</td>
            <td class="">
              <%= form.text_field :M2010, size: 10, :class=>'age_new_input',:id=>"input_M2010"  %>
              <input type="checkbox" name="checkbox" class="cal_checkbox" value="M2010">
            </td>
          </tr>
      </table>
      <div>
        総人口増減:
        <input class="input_readonly right_margin" id="total_population" value=<%= @age_and_genders.total %> readonly>
         計:
        <input class="input_readonly right_margin" id="total" value="" readonly>
         総人口増減との差:
        <input class="input_readonly" id="diff" value="" readonly>
      </div>
      <div>
        <%= form.submit value="確定", id: "suibmit_btn" %>
        <%= form.submit value="確定・総人口増減更新", id: "suibmit_btn_confirm", data: { confirm: "総人口増減を上書きます。よろしいですか?"} %>
      </div>
      <%= form.hidden_field :event_id, :value => @age_and_genders.event_id %>
      <%= form.hidden_field :total, :value => @age_and_genders.total %>
    <% end %>

    <br/>
    <div><span class="div_bold">前出来事(有効のみ)時点の人口</span>
    <br/>※該当イベントが無効状態の際は、正しい数値が表示されません</div>
    <table class="table_main inline-block head_color">
     <thead>
       <tr>
         <th class="td_w150">女性</th>
         <th class="td_w200">出生年</th>
         <th class="td_w150">男性</th>
       </tr>
     <tbody class="table_body">
       <tr>
         <td class="div_right">
           <input id="before_F1910" class="input_white" value="<%= @before_data["F1910"].to_s(:delimited) %>" >
         </td>
         <td class="">~1910</td>
         <td class="div_right">
           <input id="before_M1910" class="input_white" value="<%= @before_data["M1910"].to_s(:delimited) %>" >
         </td>
       </tr>
       <tr>
         <td class="div_right">
           <input id="before_F1920" class="input_white" value="<%= @before_data["F1920"].to_s(:delimited) %>" >
         </td>
         <td class="">1920~1929</td>
         <td class="div_right">
           <input id="before_M1920" class="input_white" value="<%= @before_data["M1920"].to_s(:delimited) %>" >
         </td>
       </tr>
       <tr>
         <td class="div_right">
           <input id="before_F1930" class="input_white" value="<%= @before_data["F1930"].to_s(:delimited) %>" >
         </td>
         <td class="">1930~1939</td>
         <td class="div_right">
           <input id="before_M1930" class="input_white" value="<%= @before_data["M1930"].to_s(:delimited) %>" >
         </td>
       </tr>
       <tr>
         <td class="div_right">
           <input id="before_F1940" class="input_white" value="<%= @before_data["F1940"].to_s(:delimited) %>" >
         </td>
         <td class="">1940~1949</td>
         <td class="div_right">
           <input id="before_M1940" class="input_white" value="<%= @before_data["M1940"].to_s(:delimited) %>" >
         </td>
       </tr>
       <tr>
         <td class="div_right">
           <input id="before_F1950" class="input_white" value="<%= @before_data["F1950"].to_s(:delimited) %>" >
         </td>
         <td class="">1950~1959</td>
         <td class="div_right">
           <input id="before_M1950" class="input_white" value="<%= @before_data["M1950"].to_s(:delimited) %>" >
         </td>
       </tr>
       <tr>
         <td class="div_right">
           <input id="before_F1960" class="input_white" value="<%= @before_data["F1960"].to_s(:delimited) %>" >
         </td>
         <td class="">1960~1969</td>
         <td class="div_right">
           <input id="before_M1960" class="input_white" value="<%= @before_data["M1960"].to_s(:delimited) %>" >
         </td>
       </tr>
       <tr>
         <td class="div_right">
           <input id="before_F1970" class="input_white" value="<%= @before_data["F1970"].to_s(:delimited) %>" >
         </td>
         <td class="">1970~1979</td>
         <td class="div_right">
           <input id="before_M1970" class="input_white" value="<%= @before_data["M1970"].to_s(:delimited) %>" >
         </td>
       </tr>
       <tr>
         <td class="div_right">
           <input id="before_F1980" class="input_white" value="<%= @before_data["F1980"].to_s(:delimited) %>" >
         </td>
         <td class="">1980~1989</td>
         <td class="div_right">
           <input id="before_M1980" class="input_white" value="<%= @before_data["M1980"].to_s(:delimited) %>" >
         </td>
       </tr>
       <tr>
         <td class="div_right">
           <input id="before_F1990" class="input_white" value="<%= @before_data["F1990"].to_s(:delimited) %>" >
         </td>
         <td class="">1990~1999</td>
         <td class="div_right">
           <input id="before_M1990" class="input_white" value="<%= @before_data["M1990"].to_s(:delimited) %>" >
         </td>
       </tr>
       <tr>
         <td class="div_right">
           <input id="before_F2000" class="input_white" value="<%= @before_data["F2000"].to_s(:delimited) %>" >
         </td>
         <td class="">2000~2009</td>
         <td class="div_right">
           <input id="before_M2000" class="input_white" value="<%= @before_data["M2000"].to_s(:delimited) %>" >
         </td>
       </tr>
       <tr>
         <td class="div_right">
           <input id="before_F2010" class="input_white" value="<%= @before_data["F2010"].to_s(:delimited) %>" >
         </td>
         <td class="">2010~</td>
         <td class="div_right">
           <input id="before_M2010" class="input_white" value="<%= @before_data["M2010"].to_s(:delimited) %>" >
         </td>
       </tr>
   </table>
  </div>
</div>
